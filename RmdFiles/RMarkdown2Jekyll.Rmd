---
layout: post
title:  "Publishing RMarkdown Reports with Jekyll"
author: "Patrick Kiel"
date: "2022-02-22"
categories: [methods]
output:
  md_document:
    variant: gfm
    preserve_yaml: TRUE
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, 
  encoding = encoding, 
  output_file = paste0(Sys.Date(), "-",
                        gsub(pattern = "\\.Rmd$",
                              "", basename(inputFile))
                        ,".md"), 
  output_dir = "../_posts") })
always_allow_html: true
---

```{r setup, include=FALSE, cache=FALSE}
#load packages
library(tidyverse)
library(kableExtra)

base_dir <- "C:/Users/pkiel/Github/notebook/" # i.e. where the jekyll blog is on the hard drive.
base_url <- "/notebook/" # subdirectory of patrickkiel.com
fig_path <- "images/"

  # Set base directories
  knitr::opts_knit$set(base.dir = base_dir, base.url = base_url)
  
  # Set figure directories
  knitr::opts_chunk$set(fig.path = fig_path,
                      cache.path = '../cache/',
                      message=FALSE, warning=FALSE,
                      cache = FALSE)




```

Two major goals of this Open Notebook are to have my analyses publicly available for peer review and to share my reports with collaborators. I primarily use R and find RMarkdown an effective way to create reproducible code. However, sharing HTML files or PDF files back and forth over email is cumbersome, and prevents the use of dynamic applets. Toward this end, I have developed a reusable RMarkdown template that generates a Github Flavored markdown file which is converted to a Jekyll static page on my Open Notebook website.

I can some create some code and it is viewable by others to see what I am doing.

```{r}
mtcars %>%
  group_by(cyl) %>%
  summarise(count = n(),
            averageMPG = mean(mpg, na.rm = T),
            sdMPG = sd(mpg, na.rm = T)) %>%
  kbl() %>%
  kable_material()
```


I can also code some output and you can see the code and figure.

```{r boxplotExample}
mtcars %>%
  ggplot(aes(factor(cyl), mpg)) +
  geom_boxplot() +
  theme_classic()
```

Finally, I can just output a figure without underlying code.
```{r lmExample, echo=F}
mtcars %>%
  ggplot(aes(cyl, mpg)) +
  geom_point() +
  geom_smooth(method='lm', formula=y~x) +
  theme_classic()
```

